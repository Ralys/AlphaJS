(function(e){var d={};var b=function(h){this.name="AlphaError";this.message=h};b.prototype=new Error();var g={renameFunction:function(i,h){return Function("fn","return (function "+h+"(){ return fn.apply(this, arguments) });")(i)},hydrate:function(h){if(h==null){return}for(var i in h){this[i]=h[i]}},setter:function(i,h){if(i==null){return}for(var j in i){if(h&&!this.hasOwnProperty(j)){throw new b("[setter] "+j+" is not a property of current object")}this[j]=i[j]}},splitAttributesMethods:function(h){if(h==null){throw new b("[splitAttributesMethods] properties must be an object")}var k={attributes:{},methods:{}};for(var j in h){var i=h[j];if(i instanceof Function){k.methods[j]=i}else{k.attributes[j]=i}}return k},extend:function(k){if(!(k instanceof Array)){throw new b("[extend] Parents must be an array")}var h;if(k.length>0){for(var j=0;j<k.length;j++){h=k[j];if(h!=null){h.call(this)}}}},getLastElement:function(){if(!(this instanceof Array)){throw new b("[getLastElement] array must be an Array")}var h=null;for(var i in this){h=this[i]}return h},removeElement:function(i){if(!(this instanceof Array)){throw new b("[removeElement] array must be an Array")}var h=null;for(var j in this){if(this[j]==i){h=j;break}}this.splice(j,1)},containsElement:function(h,i){if(!(this instanceof Array)){throw new b("[containsElement] array must be an Array")}if(i!=null){if(!(i instanceof Function)){throw new b("[containsElement] fn Must be a function.")}for(var j in this){if(i(this[j],h)){return true}}return false}else{return(this.indexOf(h)!=-1)}},loadBody:function(){f.ready(function(){if(d.ui.singletons.$body==null){d.ui.singletons.$body=e("body")}})},applyDOMElement:function(j,h,i){var k=this;g.loadBody();f.ready(function(){if(h==null){k.set(j,d.ui.singletons.$body)}else{k.set(j,e(h))}if(i!=null){i.call(k)}})},onclick:function(h,i){var j=this;f.ready(function(){e(this).on("click",h,function(k){k.preventDefault();i.call(j)})})}};d.createClass=function(m){if(typeof m!="object"||m==null){throw new b("[Alpha.createClass] Definition of a class must be an object")}if(m.name==null){throw new b("[Alpha.createClass] Name of the class must be indicated")}if(m.strict!=null&&typeof m.strict!="boolean"){throw new b("[Alpha.createClass] Strict must be boolean if specified")}var j={};if(m.properties!=null){j=g.splitAttributesMethods(m.properties)}var l=function(i){if(m.parents!=null){g.extend.call(this,m.parents)}g.hydrate.call(this,j.attributes);if(i!=null){if(typeof i!="object"){throw new b("[Alpha.createClass] Parameter of constructor must be an object")}else{g.setter.call(this,i,m.strict)}}if(m.init!=null){if(m.init instanceof Function){m.init.call(this)}else{throw new b("[Alpha.createClass] Init must be a function")}}};var n=g.renameFunction(l,m.name);n.prototype.get=function(){if(arguments[0] instanceof Array){var r=arguments[0],o={};if(r.length==0){throw new b("[get] Array must contain at least one element")}for(var q=0;q<r.length;q++){var p=r[q];o[p]=this.get(p)}return o}else{if(typeof arguments[0]=="string"){var p=arguments[0];if(!this.hasOwnProperty(p)){throw new b("[get] Property doesn't exist for this object")}return this[p]}else{throw new b("[get] Parameter must be a string or an array")}}};n.prototype.set=function(){if(arguments.length==2){if(typeof arguments[0]!="string"){throw new b("[set] Property to modify must be a string")}var o=arguments[0],i=arguments[1];var p={};p[o]=i;g.setter.call(this,p,m.strict)}else{if(arguments.length==1){if(typeof arguments[0]!="object"){throw new b("[set] Set of properties to modify must be an object")}var p=arguments[0];for(var o in p){var i=p[o];this.set(o,i)}}}return this};if(m.parents!=null){for(var h=0;h<m.parents.length;h++){var k=m.parents[h];g.hydrate.call(n.prototype,k.prototype)}}g.hydrate.call(n.prototype,j.methods);n.prototype.clone=function(){return new n(this)};return n};var c=d.createClass({name:"AlphaObject"});d.createObject=function(h){return new c(h)};d.ui={};d.ui.singletons={};d.ui.effects={};var f=e(document);var a="http://rawgit.com/ralys/alphajs/master/stylesheets/alphajs.min.css";d.ui.loadStylesheet=function(h){f.ready(function(){if(e('link[rel*=style][href="'+h+'"]').length==0){e("head").append('<link rel="stylesheet" type="text/css" href="'+h+'">')}});return this};d.ui.loadCSS=function(){return d.ui.loadStylesheet(a)};d.ui.effects.js=function(i,j,h){if(d.ui.effects.js.allEffects.indexOf(i)!=-1){jQuery.fn[i].call(j,h)}else{throw new b('[Alpha.ui.effects.js] "'+i+'" is not a jQuery effect')}};d.ui.effects.js.allEffects=["fadeIn","fadeOut","slideUp","slideDown","slideToggle","toggle"];d.ui.effects.css=function(i,j,h){if(d.ui.effects.css.allEffects.indexOf(i)!=-1){j.addClass(i+" animated").one(d.ui.effects.css.event,h)}else{throw new b('[Alpha.ui.effects.css] "'+i+'" is not a jQuery effect')}};d.ui.effects.css.event="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";d.ui.effects.css.allEffects=["bounce","flash","pulse","rubberBand","shake","swing","tada","wobble","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","flip","flipInX","flipInY","flipOutX","flipOutY","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollIn","rollOut","zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","zoomOut","zoomOutDown","zoomOutLeft","zoomOutRight","zoomOutUp"];d.ui.Element=d.createClass({name:"UIElement",properties:{$container:null,$el:null,render:new Function(),onShow_effect:new Function(),onHide_effect:new Function(),set:function(){c.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){try{var i=arguments[0],h=this.$el.find("."+i);if(h.length!=0){h.html(this[i])}}catch(j){console.warn(j)}}return this}}});d.ui.Button=d.createClass({name:"AlphaButton",parents:[d.ui.Element],properties:{id:null,"class":null,content:"",type:null,href:null,belongsTo:null,onClick:null,render:function(){var i=null;if(this.type==null){throw new b("[Alpha.ui.Button.render] Type must be either 'link' or 'button'.")}var h="alphajs button";if(this["class"]!=null){this["class"]=h+" "+this["class"]}else{this["class"]=h}this.id="alphajs_button_"+(++d.ui.Button.instanceNumber);var j='id = "'+this.id+'" class = "'+this["class"]+'"';if(this.type=="link"){if(this.href==null){throw new b("[Alpha.ui.Button.render] Link must no be null to create a Alpha.ui.Button link")}i="<a "+j+' href="'+this.href+'">'+(this.content||"")+"</a>"}else{if(this.type=="button"){i="<input "+j+' type="button" value="'+(this.content||"")+'">'}else{throw new b("[Alpha.ui.Button.render] Type '"+this.type+"' doesn't apply for Alpha.ui.Button type")}}return i},show:function(){g.applyDOMElement.call(this,"$container",this.$container,function(){this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);if(this.onClick!=null){if(!(this.onClick instanceof Function)){throw new b("[Alpha.ui.Button.show] Attribute onClick must be a function")}g.onclick.call(this,"#"+this.id,this.onClick)}})},bind:function(h){if(h==null){throw new b("[Alpha.ui.Button.bind] UIElement must be an instance of Alpha.ui.Element")}this.belongsTo=h;this.$container=this.belongsTo.$el;this.$el=this.$container.find("#"+this.id);if(this.onClick!=null){if(!(this.onClick instanceof Function)){throw new b("[Alpha.ui.Button.bind] Attribute onClick must be a function")}g.onclick.call(this,"#"+this.id,this.onClick)}},set:function(){d.ui.Element.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){var i=arguments[0];switch(i){case"content":if(this.type=="link"){this.$el.html(this.content)}else{if(this.type=="button"){this.$el.attr("value",this.content)}}break;case"href":if(this.type=="link"){this.$el.attr("href",this.href)}break;case"class":var h="alphajs button";this.$el.attr("class",h).addClass(this["class"]);break}}return this}}});d.ui.Button.instanceNumber=0;d.ui.ModalBox=d.createClass({name:"AlphaModalBox",parents:[d.ui.Element],properties:{id:null,title:"Title",content:"Put your content here.",$overlay:null,is_shown:false,buttonsAlignment:"right",buttons:[new d.ui.Button({"class":"blue",content:"OK",type:"button",onClick:function(){this.belongsTo.close()}}),new d.ui.Button({"class":"red",content:"Cancel",type:"button",onClick:function(){this.belongsTo.close()}})],triggeredBy:null,onShow_effect:function(){this.$overlay.hide().fadeIn();if(this.$container==d.ui.singletons.$body){this.$overlay.css("position","fixed")}this.$container.css("overflow","hidden").bind("mousewheel",function(h){h.preventDefault()});this.$el.css("top","20px");d.ui.effects.css("bounceInDown",this.$el)},onHide_effect:function(){var h=this;d.ui.effects.css("bounceOutUp",this.$el,function(){h.$overlay.fadeOut(function(){h.$overlay.remove();h.$el.remove()});h.$container.css("overflow","initial").unbind("mousewheel")})},render:function(){this.id="alphajs_modalbox_"+(++d.ui.ModalBox.instanceNumber);var k='<div id="'+this.id+'" class="alphajs modalbox"><div class="close">×</div><div class="title">'+this.title+'</div><div class="content">'+this.content+"</div>";if(this.buttons.length>0){k+='<div class="buttons">';for(var j=0;j<this.buttons.length;j++){var h=this.buttons[j];if(!(h instanceof d.ui.Button)){throw new b("[Alpha.ui.ModalBox.render] Button must be instance of Alpha.ui.Button")}else{k+=h.render()}}k+="</div>"}k+="</div>";return k},show:function(){var l=this;if(this.is_shown){return}var k="alphajs_overlay_"+(d.ui.ModalBox.instanceNumber+1);this.$container.append('<div id="'+k+'" class="alphajs overlay"></div>').append(this.render());this.$overlay=this.$container.find("#"+k);this.$el=this.$container.find("#"+this.id);this.$el.find(".close").click(function(){l.close()});if(this.buttons.length>0){for(var j=0;j<this.buttons.length;j++){var h=this.buttons[j];h.bind(this)}}if(this.buttonsAlignment!=null){this.set("buttonsAlignment",this.buttonsAlignment)}this.is_shown=true;d.ui.ModalBox.currently_opened.push(this);if(this.onShow_effect!=null&&this.onShow_effect instanceof Function){this.onShow_effect()}},close:function(){this.is_shown=false;g.removeElement.call(d.ui.ModalBox.currently_opened,this);if(this.onHide_effect!=null&&this.onHide_effect instanceof Function){this.onHide_effect()}},addButton:function(h){if(!(h instanceof d.ui.Button)){throw new b("[Alpha.ui.ModalBox.addButton] Button must be instance of Alpha.ui.Button")}this.buttons.push(h);if(this.$el==null){return}this.$el.find(".buttons").append(h.render());h.bind(this)},removeButton:function(h){if(!(h instanceof d.ui.Button)){throw new b("[Alpha.ui.ModalBox.removeButton] Button must be instance of Alpha.ui.Button")}g.removeElement.call(this.buttons,h);if(this.$el==null){return}h.$el.remove()},set:function(){d.ui.Element.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){var h=arguments[0];switch(h){case"buttonsAlignment":switch(this.buttonsAlignment){case"left":case"center":case"right":this.$el.find(".buttons").css("text-align",this.buttonsAlignment);break;default:throw new b('[Alpha.ui.ModalBox.set] Align must be "left", "center" or "right"')}break}}return this}},init:function(){g.applyDOMElement.call(this,"$container",this.$container);if(this.triggeredBy){var h=this;g.onclick(this.triggeredBy,function(){h.show()})}}});d.ui.ModalBox.currently_opened=[];d.ui.ModalBox.instanceNumber=0;f.keydown(function(i){if(i.keyCode==27){var h=g.getLastElement.call(d.ui.ModalBox.currently_opened);if(h==null){return}h.close()}});d.ui.SideBox=d.createClass({name:"AlphaSideBox",parents:[d.ui.Element],properties:{id:null,title:"Title",content:"Put your content here.",direction:"left",is_shown:false,onShow_effect:null,onHide_effect:null,$appearOn:null,render:function(){var h='<div id="'+this.id+'" class="alphajs sidebox"><div class="close">×</div><div class="title">'+this.title+'</div><div class="content">'+this.content+"</div></div>";return h},show:function(h){if(this.is_shown){return}var j=this;this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);this.$el.find(".close").click(function(){j.close()});this.is_shown=true;this.$el.css("top",h+"px").css(this.direction,"0");if(this.onShow_effect!=null&&this.onShow_effect instanceof Function){this.onShow_effect()}else{var i="";if(this.direction=="left"){i="rotateInDownLeft"}else{i="rotateInDownRight"}d.ui.effects.css(i,this.$el)}},close:function(){var i=this;this.is_shown=false;if(this.onHide_effect!=null&&this.onHide_effect instanceof Function){this.onHide_effect()}else{var h="";if(this.direction=="left"){h="rotateOutUpLeft"}else{h="rotateOutUpRight"}d.ui.effects.css(h,this.$el,function(){i.$el.remove()})}}},init:function(){g.applyDOMElement.call(this,"$container",this.$container);d.ui.SideBox.instances.push(this);this.id="alphajs_sidebox_"+d.ui.SideBox.instances.length;if(this.direction!="left"&&this.direction!="right"){throw new b("[Alpha.ui.SideBox] direction must be either left or right")}g.applyDOMElement.call(this,"$appearOn",this.$appearOn,function(){if(this.$appearOn.length==0){throw new b("[Alpha.ui.SideBox] $appearOn must be a valid selector")}})}});d.ui.SideBox.instances=[];d.ui.SideBox.showAll=function(){f.ready(function(){var h=e(window);h.on("scroll",function(){var p=h.scrollTop(),k=p+h.height();for(var l=0;l<d.ui.SideBox.instances.length;l++){var o=d.ui.SideBox.instances[l];var j=o.$appearOn.offset().top,m=o.$appearOn.height(),n=j+m;if(n<=k&&j>=p){o.show(j+m)}}})})};d.ui.SearchWidget=d.createClass({name:"AlphaSearchWidget",parents:[d.ui.Element],properties:{id:null,num_guests:0,guests:[],notFoundMessage:"No results found",getOptions:new Function(),getResults:new Function(),render:function(){this.id="alpha_js_searchwidget_"+(++d.ui.SearchWidget.instanceNumber);var h='<div id="'+this.id+'" class="alphajs searchwidget"><select class="dropdown"></select><div class="search"><input type="search"><div class="results"></div></div><div class="guests-list"></div></div>';return h},compareResults:function(i,h){return i.id==h.id},renderResult:new Function(),renderResults:function(k){if(this.renderResult==null){throw new b("[Alpha.ui.SearchWidget.renderResults] renderResult must be a function")}var l="";if(k==null||k.length==0){l='<div class="result">'+this.notFoundMessage+"</div>"}else{for(var j=0;j<k.length;j++){var h=k[j];var m="";if(g.containsElement.call(this.guests,h,this.compareResults)){m=" checked"}l+='<div class="result"><input type="checkbox"'+m+" >"+this.renderResult(h)+"</div>"}}return l},renderGuest:function(h){return'<div class="guest"><input name="user_'+(++this.num_guests)+'" type="checkbox" checked>'+this.renderResult(h)+"</div>"},addGuest:function(j){if(g.containsElement.call(this.guests,j,this.compareResults)){return}var k=this;this.guests.push(j);var h=false;this.$el.find(".results").find(".result").each(function(){var l=e(this).data();if(k.compareResults(l,j)){if(!e(this).find("input[type=checkbox]").is(":checked")){e(this).find("input[type=checkbox]").prop("checked",true)}return}});this.$el.find(".guests-list").find(".guest").each(function(){var l=e(this).data();if(k.compareResults(l,j)){h=e(this);return}});if(h){h.find("input[type=checkbox]").prop("checked",true)}else{this.$el.find(".guests-list").append(this.renderGuest(j));var i=this.$el.find(".guests-list").find(".guest").last();i.data(j);d.ui.effects.css("bounceIn",i);i.find("input[type=checkbox]").change(function(){if(e(this).is(":checked")){k.addGuest(j)}else{k.removeGuest(j)}})}},removeGuest:function(h){if(!g.containsElement.call(this.guests,h,this.compareResults)){return}var j=this;g.removeElement.call(this.guests,h);var i=function(){var k=e(this).data();if(j.compareResults(k,h)){e(this).find("input[type=checkbox]").prop("checked",false);return}};this.$el.find(".results").find(".result").each(i);this.$el.find(".guests-list").find(".guest").each(i)},show:function(){var h=this;this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);if(this.getOptions==null||!(this.getOptions instanceof Function)){throw new b("[Alpha.ui.SearchWidget.show] getOptions must be a function")}if(this.getResults==null||!(this.getResults instanceof Function)){throw new b("[Alpha.ui.SearchWidget.show] getResults must be a function")}this.getOptions(function(j){for(var k=0;k<j.length;k++){h.$el.find("select.dropdown").append('<option value="'+j[k]+'">'+j[k]+"</option>");h.$el.find("select.dropdown").change(function(i){h.$el.find(".search").find("input[type=search]").keyup()})}});this.$el.find(".search").find("input[type=search]").keyup(function(k){e(this).parent().find(".results").empty();var j=e(this).val().trim(),i=h.$el.find("select.dropdown").val();if(j==""){return}h.getResults(function(m){h.$el.find(".results").append(h.renderResults(m));var l=0;h.$el.find(".results").find(".result").each(function(){e(this).data(m[l]);e(this).find("input[type=checkbox]").change(function(){var n=e(this).parent().data();if(e(this).is(":checked")){h.addGuest(n)}else{h.removeGuest(n)}});l++})},j,i)});this.$el.find(".search").find("input[type=search]").on("search",function(){h.$el.find(".search").find(".results").empty()})}},init:function(){var h=this;g.applyDOMElement.call(this,"$container",this.$container);f.ready(function(){h.show()})}});d.ui.SearchWidget.instanceNumber=0;window.Alpha=d})(jQuery);