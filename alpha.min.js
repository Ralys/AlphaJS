(function(f){var a={};var i=function(j){this.name="AlphaError";this.message=j};i.prototype=new Error();var h={renameFunction:function(k,j){return Function("fn","return (function "+j+"(){ return fn.apply(this, arguments) });")(k)},hydrate:function(j){if(j==null){return}for(var k in j){this[k]=j[k]}},setter:function(k,j){if(k==null){return}for(var l in k){if(j&&!this.hasOwnProperty(l)){throw new i("[setter] "+l+" is not a property of current object")}this[l]=k[l]}},splitAttributesMethods:function(j){if(j==null){throw new i("[splitAttributesMethods] properties must be an object")}var m={attributes:{},methods:{}};for(var l in j){var k=j[l];if(k instanceof Function){m.methods[l]=k}else{m.attributes[l]=k}}return m},extend:function(m,l){if(!(m instanceof Array)){throw new i("[extend] Parents must be an array")}var j;if(m.length>0){for(var k=0;k<m.length;k++){j=m[k];if(j!=null){j.call(this,l)}}}},getLastElement:function(){if(!(this instanceof Array)){throw new i("[getLastElement] array must be an Array")}var j=null;for(var k in this){j=this[k]}return j},removeElement:function(k){if(!(this instanceof Array)){throw new i("[removeElement] array must be an Array")}var j=null;for(var l in this){if(this[l]==k){j=l;break}}this.splice(l,1)},containsElement:function(j,k){if(!(this instanceof Array)){throw new i("[containsElement] array must be an Array")}if(k!=null){if(!(k instanceof Function)){throw new i("[containsElement] fn Must be a function.")}for(var l in this){if(k(this[l],j)){return true}}return false}else{return(this.indexOf(j)!=-1)}},applyDOMElement:function(l,j,k){var m=this;f(function(){if(a.ui.singletons.$body==null){a.ui.singletons.$body=f(document.body)}if(j==null){m.set(l,a.ui.singletons.$body)}else{m.set(l,f(j))}if(k!=null){k.call(m)}})},onclick:function(j,k){var l=this;f(function(){f(this).on("click",j,function(m){m.preventDefault();k.call(l)})})}};a.createClass=function(n){if(typeof n!="object"||n==null){throw new i("[Alpha.createClass] Definition of a class must be an object")}if(n.name==null){throw new i("[Alpha.createClass] Name of the class must be indicated")}if(n.strict!=null&&typeof n.strict!="boolean"){throw new i("[Alpha.createClass] Strict must be boolean if specified")}var k={};if(n.properties!=null){k=h.splitAttributesMethods(n.properties)}var m=function(p){if(n.parents!=null){h.extend.call(this,n.parents,p)}h.hydrate.call(this,k.attributes);if(p!=null){if(typeof p!="object"){throw new i("[Alpha.createClass] Parameter of constructor must be an object")}else{h.setter.call(this,p,n.strict)}}if(n.init!=null){if(n.init instanceof Function){n.init.call(this)}else{throw new i("[Alpha.createClass] Init must be a function")}}};var o=h.renameFunction(m,n.name);o.prototype.get=function(){if(arguments[0] instanceof Array){var s=arguments[0],p={};if(s.length==0){throw new i("[get] Array must contain at least one element")}for(var r=0;r<s.length;r++){var q=s[r];p[q]=this.get(q)}return p}else{if(typeof arguments[0]=="string"){var q=arguments[0];if(!this.hasOwnProperty(q)){throw new i("[get] Property doesn't exist for this object")}return this[q]}else{throw new i("[get] Parameter must be a string or an array")}}};o.prototype.set=function(){if(arguments.length==2){if(typeof arguments[0]!="string"){throw new i("[set] Property to modify must be a string")}var q=arguments[0],p=arguments[1];var r={};r[q]=p;h.setter.call(this,r,n.strict)}else{if(arguments.length==1){if(typeof arguments[0]!="object"){throw new i("[set] Set of properties to modify must be an object")}var r=arguments[0];for(var q in r){var p=r[q];this.set(q,p)}}}return this};if(n.parents!=null){for(var j=0;j<n.parents.length;j++){var l=n.parents[j];h.hydrate.call(o.prototype,l.prototype)}}h.hydrate.call(o.prototype,k.methods);o.prototype.clone=function(){return new o(this)};return o};var e=a.createClass({name:"AlphaObject"});a.createObject=function(j){return new e(j)};a.ui={};a.ui.singletons={};a.ui.effects={};var d=f(document),b=f(window),g=null;var c="http://rawgit.com/ralys/alphajs/master/stylesheets/alphajs.min.css";a.ui.loadStylesheet=function(j){f(function(){if(g==null){g=f(document.head)}if(f('link[rel*=style][href="'+j+'"]').length==0){g.append('<link rel="stylesheet" type="text/css" href="'+j+'">')}});return this};a.ui.loadCSS=function(){return a.ui.loadStylesheet(c)};a.ui.effects.js=function(k,l,j){if(a.ui.effects.js.all.indexOf(k)!=-1){jQuery.fn[k].call(l,j)}else{throw new i('[Alpha.ui.effects.js] "'+k+'" is not a jQuery effect')}};a.ui.effects.js.all=["fadeIn","fadeOut","slideUp","slideDown","slideToggle","toggle"];a.ui.effects.css=function(k,l,j){if(a.ui.effects.css.all.indexOf(k)!=-1){l.addClass(k+" animated").one(a.ui.effects.css.event,j)}else{throw new i('[Alpha.ui.effects.css] "'+k+'" is not a CSS effect registered')}};a.ui.effects.css.event="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";a.ui.effects.css.all=["bounce","flash","pulse","rubberBand","shake","swing","tada","wobble","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","flip","flipInX","flipInY","flipOutX","flipOutY","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollIn","rollOut","zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","zoomOut","zoomOutDown","zoomOutLeft","zoomOutRight","zoomOutUp"];a.ui.Element=a.createClass({name:"UIElement",properties:{$container:null,$el:null,render:new Function(),onShow_effect:new Function(),onHide_effect:new Function(),set:function(){e.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){try{var k=arguments[0],j=this.$el.find("."+k);if(j.length!=0){j.html(this[k])}}catch(l){console.warn(l)}}return this}}});a.ui.Button=a.createClass({name:"AlphaButton",parents:[a.ui.Element],properties:{id:null,"class":null,content:"",type:null,href:null,belongsTo:null,onClick:null,render:function(){var k=null;if(this.type==null){throw new i("[Alpha.ui.Button.render] Type must be either 'link' or 'button'.")}var j="alphajs button";if(this["class"]!=null){this["class"]=j+" "+this["class"]}else{this["class"]=j}this.id="alphajs_button_"+(++a.ui.Button.instanceNumber);var l='id = "'+this.id+'" class = "'+this["class"]+'"';if(this.type=="link"){if(this.href==null){throw new i("[Alpha.ui.Button.render] Link must no be null to create a Alpha.ui.Button link")}k="<a "+l+' href="'+this.href+'">'+(this.content||"")+"</a>"}else{if(this.type=="button"){k="<input "+l+' type="button" value="'+(this.content||"")+'">'}else{throw new i("[Alpha.ui.Button.render] Type '"+this.type+"' doesn't apply for Alpha.ui.Button type")}}return k},show:function(){h.applyDOMElement.call(this,"$container",this.$container,function(){this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);if(this.onClick!=null){if(!(this.onClick instanceof Function)){throw new i("[Alpha.ui.Button.show] Attribute onClick must be a function")}h.onclick.call(this,"#"+this.id,this.onClick)}})},bind:function(j){if(j==null){throw new i("[Alpha.ui.Button.bind] UIElement must be an instance of Alpha.ui.Element")}this.belongsTo=j;this.$container=this.belongsTo.$el;this.$el=this.$container.find("#"+this.id);if(this.onClick!=null){if(!(this.onClick instanceof Function)){throw new i("[Alpha.ui.Button.bind] Attribute onClick must be a function")}h.onclick.call(this,"#"+this.id,this.onClick)}},set:function(){a.ui.Element.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){var k=arguments[0];switch(k){case"content":if(this.type=="link"){this.$el.html(this.content)}else{if(this.type=="button"){this.$el.attr("value",this.content)}}break;case"href":if(this.type=="link"){this.$el.attr("href",this.href)}break;case"class":var j="alphajs button";this.$el.attr("class",j).addClass(this["class"]);break}}return this}}});a.ui.Button.instanceNumber=0;a.ui.ModalBox=a.createClass({name:"AlphaModalBox",parents:[a.ui.Element],properties:{id:null,title:"Title",content:"Put your content here.",$overlay:null,is_shown:false,buttonsAlignment:"right",buttons:[new a.ui.Button({"class":"blue",content:"OK",type:"button",onClick:function(){this.belongsTo.close()}}),new a.ui.Button({"class":"red",content:"Cancel",type:"button",onClick:function(){this.belongsTo.close()}})],triggeredBy:null,onShow_effect:function(){this.$overlay.hide().fadeIn();if(this.$container==a.ui.singletons.$body){this.$overlay.css("position","fixed");this.$el.css("top",b.scrollTop()+20)}this.$container.css("overflow","hidden").bind("mousewheel",function(j){j.preventDefault()});a.ui.effects.css("bounceInDown",this.$el)},onHide_effect:function(){var j=this;a.ui.effects.css("bounceOutUp",this.$el,function(){j.$overlay.fadeOut(function(){j.$overlay.remove();j.$el.remove()});j.$container.css("overflow","initial").unbind("mousewheel")})},render:function(){this.id="alphajs_modalbox_"+(++a.ui.ModalBox.instanceNumber);var l='<div id="'+this.id+'" class="alphajs modalbox"><div class="close">×</div><div class="title">'+this.title+'</div><div class="content">'+this.content+"</div>";if(this.buttons.length>0){l+='<div class="buttons">';for(var k=0;k<this.buttons.length;k++){var j=this.buttons[k];if(!(j instanceof a.ui.Button)){throw new i("[Alpha.ui.ModalBox.render] Button must be instance of Alpha.ui.Button")}else{l+=j.render()}}l+="</div>"}l+="</div>";return l},show:function(){var m=this;if(this.is_shown){return}var l="alphajs_overlay_"+(a.ui.ModalBox.instanceNumber+1);this.$container.append('<div id="'+l+'" class="alphajs overlay"></div>').append(this.render());this.$overlay=this.$container.find("#"+l);this.$el=this.$container.find("#"+this.id);this.$el.find(".close").on("click",function(){m.close()});if(this.buttons.length>0){for(var k=0;k<this.buttons.length;k++){var j=this.buttons[k];j.bind(this)}}if(this.buttonsAlignment!=null){this.set("buttonsAlignment",this.buttonsAlignment)}this.is_shown=true;a.ui.ModalBox.currently_opened.push(this);if(this.onShow_effect!=null&&this.onShow_effect instanceof Function){this.onShow_effect()}},close:function(){this.is_shown=false;h.removeElement.call(a.ui.ModalBox.currently_opened,this);if(this.onHide_effect!=null&&this.onHide_effect instanceof Function){this.onHide_effect()}},addButton:function(j){if(!(j instanceof a.ui.Button)){throw new i("[Alpha.ui.ModalBox.addButton] Button must be instance of Alpha.ui.Button")}this.buttons.push(j);if(this.$el==null){return}this.$el.find(".buttons").append(j.render());j.bind(this)},removeButton:function(j){if(!(j instanceof a.ui.Button)){throw new i("[Alpha.ui.ModalBox.removeButton] Button must be instance of Alpha.ui.Button")}h.removeElement.call(this.buttons,j);if(this.$el==null){return}j.$el.remove()},set:function(){a.ui.Element.prototype.set.apply(this,arguments);if(arguments.length==2&&this.$el!=null){var j=arguments[0];switch(j){case"buttonsAlignment":switch(this.buttonsAlignment){case"left":case"center":case"right":this.$el.find(".buttons").css("text-align",this.buttonsAlignment);break;default:throw new i('[Alpha.ui.ModalBox.set] Align must be "left", "center" or "right"')}break}}return this}},init:function(){h.applyDOMElement.call(this,"$container",this.$container);if(this.triggeredBy){h.onclick.call(this,this.triggeredBy,this.show)}}});a.ui.ModalBox.currently_opened=[];a.ui.ModalBox.instanceNumber=0;d.keydown(function(k){if(k.keyCode==27){var j=h.getLastElement.call(a.ui.ModalBox.currently_opened);if(j==null){return}j.close()}});a.ui.SideBox=a.createClass({name:"AlphaSideBox",parents:[a.ui.Element],properties:{id:null,title:"Title",content:"Put your content here.",direction:"left",is_shown:false,onShow_effect:null,onHide_effect:null,$appearOn:null,render:function(){var j='<div id="'+this.id+'" class="alphajs sidebox"><div class="close">×</div><div class="title">'+this.title+'</div><div class="content">'+this.content+"</div></div>";return j},show:function(j){if(this.is_shown){return}var l=this;this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);this.$el.find(".close").on("click",function(){l.close()});this.is_shown=true;this.$el.css("top",j+"px").css(this.direction,"0");if(this.onShow_effect!=null&&this.onShow_effect instanceof Function){this.onShow_effect()}else{var k="";if(this.direction=="left"){k="rotateInDownLeft"}else{k="rotateInDownRight"}a.ui.effects.css(k,this.$el)}},close:function(){var k=this;if(this.onHide_effect!=null&&this.onHide_effect instanceof Function){this.onHide_effect()}else{var j="";if(this.direction=="left"){j="rotateOutUpLeft"}else{j="rotateOutUpRight"}a.ui.effects.css(j,this.$el,function(){k.$el.remove()})}}},init:function(){h.applyDOMElement.call(this,"$container",this.$container);a.ui.SideBox.instances.push(this);this.id="alphajs_sidebox_"+a.ui.SideBox.instances.length;if(this.direction!="left"&&this.direction!="right"){throw new i("[Alpha.ui.SideBox] direction must be either left or right")}h.applyDOMElement.call(this,"$appearOn",this.$appearOn,function(){if(this.$appearOn.length==0){throw new i("[Alpha.ui.SideBox] $appearOn must be a valid selector")}})}});a.ui.SideBox.instances=[];a.ui.SideBox.showAll=function(){f(function(){b.on("scroll",function(){var p=b.scrollTop(),k=p+b.height();for(var l=0;l<a.ui.SideBox.instances.length;l++){var o=a.ui.SideBox.instances[l];var j=o.$appearOn.offset().top,m=o.$appearOn.height(),n=j+m;if(n<=k&&j>=p){o.show(j+m)}}})})};a.ui.SearchWidget=a.createClass({name:"AlphaSearchWidget",parents:[a.ui.Element],properties:{id:null,num_guests:0,guests:[],notFoundMessage:"No results found",getOptions:new Function(),getResults:new Function(),render:function(){this.id="alpha_js_searchwidget_"+(++a.ui.SearchWidget.instanceNumber);var j='<div id="'+this.id+'" class="alphajs searchwidget"><select class="dropdown"></select><div class="search"><input type="search"><div class="results"></div></div><div class="guests-list"></div></div>';return j},compareResults:function(k,j){return k.id==j.id},renderResult:new Function(),renderResults:function(l){if(this.renderResult==null){throw new i("[Alpha.ui.SearchWidget.renderResults] renderResult must be a function")}var m="";if(l==null||l.length==0){m='<div class="result">'+this.notFoundMessage+"</div>"}else{for(var k=0;k<l.length;k++){var j=l[k];var n="";if(h.containsElement.call(this.guests,j,this.compareResults)){n=" checked"}m+='<div class="result"><input type="checkbox"'+n+" >"+this.renderResult(j)+"</div>"}}return m},renderGuest:function(j){return'<div class="guest"><input name="user_'+(++this.num_guests)+'" type="checkbox" checked>'+this.renderResult(j)+"</div>"},addGuest:function(l){if(h.containsElement.call(this.guests,l,this.compareResults)){return}var m=this;this.guests.push(l);var j=false;this.$el.find(".results").find(".result").each(function(){var n=f(this).data();if(m.compareResults(n,l)){if(!f(this).find("input[type=checkbox]").is(":checked")){f(this).find("input[type=checkbox]").prop("checked",true)}return}});this.$el.find(".guests-list").find(".guest").each(function(){var n=f(this).data();if(m.compareResults(n,l)){j=f(this);return}});if(j){j.find("input[type=checkbox]").prop("checked",true)}else{this.$el.find(".guests-list").append(this.renderGuest(l));var k=this.$el.find(".guests-list").find(".guest").last();k.data(l);a.ui.effects.css("bounceIn",k);k.find("input[type=checkbox]").change(function(){if(f(this).is(":checked")){m.addGuest(l)}else{m.removeGuest(l)}})}},removeGuest:function(j){if(!h.containsElement.call(this.guests,j,this.compareResults)){return}var l=this;h.removeElement.call(this.guests,j);var k=function(){var m=f(this).data();if(l.compareResults(m,j)){f(this).find("input[type=checkbox]").prop("checked",false);return}};this.$el.find(".results").find(".result").each(k);this.$el.find(".guests-list").find(".guest").each(k)},show:function(){var j=this;this.$container.append(this.render());this.$el=this.$container.find("#"+this.id);if(this.getOptions==null||!(this.getOptions instanceof Function)){throw new i("[Alpha.ui.SearchWidget.show] getOptions must be a function")}if(this.getResults==null||!(this.getResults instanceof Function)){throw new i("[Alpha.ui.SearchWidget.show] getResults must be a function")}this.getOptions(function(k){for(var l=0;l<k.length;l++){j.$el.find("select.dropdown").append('<option value="'+k[l]+'">'+k[l]+"</option>");j.$el.find("select.dropdown").change(function(m){j.$el.find(".search").find("input[type=search]").keyup()})}});this.$el.find(".search").find("input[type=search]").keyup(function(m){f(this).parent().find(".results").empty();var l=f(this).val().trim(),k=j.$el.find("select.dropdown").val();if(l==""){return}j.getResults(function(o){j.$el.find(".results").append(j.renderResults(o));var n=0;j.$el.find(".results").find(".result").each(function(){f(this).data(o[n]);f(this).find("input[type=checkbox]").change(function(){var p=f(this).parent().data();if(f(this).is(":checked")){j.addGuest(p)}else{j.removeGuest(p)}});n++})},l,k)});this.$el.find(".search").find("input[type=search]").on("search",function(){j.$el.find(".search").find(".results").empty()})}},init:function(){h.applyDOMElement.call(this,"$container",this.$container,this.show)}});a.ui.SearchWidget.instanceNumber=0;window.Alpha=a})(jQuery);